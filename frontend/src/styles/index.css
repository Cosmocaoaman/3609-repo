/**
 * Main CSS Entry Point
 * Custom stylesheets (Bootstrap imported in App.tsx)
 */

/* Import custom design system */
@import './design-system.css';
@import './components.css';
@import './layout.css';
@import './admin.css';

/* Global App Styles */
#root {
  min-height: 100vh;
}

/* Bootstrap Customizations */
:root {
  /* Override Bootstrap variables with our design system */
  --bs-primary: var(--color-primary);
  --bs-primary-rgb: 37, 99, 235;
  --bs-secondary: var(--color-secondary);
  --bs-success: var(--color-success);
  --bs-danger: var(--color-danger);
  --bs-warning: var(--color-warning);
  --bs-info: var(--color-info);
  --bs-light: var(--color-gray-100);
  --bs-dark: var(--color-gray-800);
  
  /* Typography */
  --bs-font-sans-serif: var(--font-family-sans);
  --bs-body-font-size: var(--font-size-base);
  --bs-body-line-height: var(--line-height-normal);
  
  /* Spacing */
  --bs-gutter-x: var(--space-6);
  --bs-gutter-y: var(--space-4);
  
  /* Border radius - slightly rounder to match wireframe */
  --bs-border-radius: var(--radius-lg);
  --bs-border-radius-sm: var(--radius-md);
  --bs-border-radius-lg: var(--radius-xl);
  
  /* Shadows */
  --bs-box-shadow: var(--shadow-md);
  --bs-box-shadow-sm: var(--shadow-sm);
  --bs-box-shadow-lg: var(--shadow-lg);
}

/* Custom Bootstrap component overrides */
.btn {
  font-weight: var(--font-weight-medium);
  transition: all var(--transition-fast);
}

.btn:hover {
  transform: translateY(-1px);
}

.card {
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.form-control {
  border-radius: var(--radius-md);
  border-color: var(--color-border);
  transition: all var(--transition-fast);
}

.form-control:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 0.2rem var(--color-primary-light);
}

.navbar {
  box-shadow: var(--shadow-sm);
}

/* Dark mode component overrides */
.theme-dark body,
.theme-dark #root {
  background-color: var(--color-background);
  color: var(--color-text-primary);
}

.theme-dark a {
  color: var(--color-primary);
}

.theme-dark h1, .theme-dark h2, .theme-dark h3, .theme-dark h4, .theme-dark h5, .theme-dark h6,
.theme-dark p, .theme-dark span, .theme-dark li, .theme-dark label {
  color: inherit;
}

.theme-dark .card {
  background-color: var(--color-surface);
  border-color: var(--color-border);
  color: var(--color-text-primary);
}

/* Ensure readable body text inside thread-detail in dark mode */
.theme-dark .thread-detail .break-words { color: var(--color-text-secondary); }

.theme-dark .form-control,
.theme-dark .form-select,
.theme-dark .form-textarea {
  background-color: var(--color-gray-800);
  color: var(--color-gray-100);
  border-color: var(--color-border);
}

.theme-dark .form-control::placeholder,
.theme-dark .form-select::placeholder,
.theme-dark .form-textarea::placeholder {
  color: var(--color-text-muted);
}

.theme-dark .btn.btn-outline-primary,
.theme-dark .btn.btn-outline-secondary,
.theme-dark .btn.btn-outline-danger,
.theme-dark .btn.btn-outline-success {
  color: var(--color-text-primary);
  border-color: var(--color-border);
}

.theme-dark .btn.btn-outline-primary:hover {
  color: var(--color-white);
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}

.theme-dark .text-muted {
  color: var(--color-text-muted) !important;
}

.theme-dark .border {
  border-color: var(--color-border) !important;
}

.theme-dark hr {
  border-color: var(--color-border);
}

.theme-dark .nav-link {
  color: var(--color-text-secondary);
  background-color: transparent;
}

.theme-dark .nav-link:hover,
.theme-dark .nav-link.active {
  color: var(--color-primary);
  background-color: var(--color-surface-hover);
}

/* Ensure anchor-based nav-link has visible text in dark mode */
.theme-dark a.nav-link { color: var(--color-text-secondary); }
.theme-dark a.nav-link:hover, .theme-dark a.nav-link.active { color: var(--color-primary); }

.theme-dark .chip {
  border-color: var(--color-border);
  color: var(--color-text-secondary);
}

.theme-dark .chip-primary {
  background-color: rgba(37, 99, 235, 0.2);
  color: var(--color-primary);
}

/* Ensure tag chips (anchor) keep readable color in dark mode */
.theme-dark a.chip,
.theme-dark a.chip:visited {
  color: var(--color-primary);
}

/* Custom utility classes */
.text-truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.text-truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Loading states */
.loading-spinner {
  display: inline-block;
  width: 1rem;
  height: 1rem;
  border: 0.125rem solid currentColor;
  border-right-color: transparent;
  border-radius: 50%;
  animation: spinner-border 0.75s linear infinite;
}

@keyframes spinner-border {
  to {
    transform: rotate(360deg);
  }
}

/* Custom animations */
.fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slide-in {
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Responsive Center and Wrapping Utilities */
.centered-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-4);
}

@media (min-width: 640px) {
  .centered-container {
    padding: 0 var(--space-6);
  }
}

@media (min-width: 1024px) {
  .centered-container {
    padding: 0 var(--space-8);
  }
}

/* Long text wrapping helpers */
.break-words {
  overflow-wrap: anywhere;
  word-wrap: break-word;
  word-break: break-word;
}

/* Ensure typical headings/links within cards and detail views wrap nicely */
.card-title,
.card-title a,
.thread-detail-title,
.thread-detail-content,
.reply-content {
  white-space: normal;
  overflow-wrap: anywhere;
}

/* Wireframe-aligned chips */
.chip {
  display: inline-block;
  padding: 6px 12px;
  border: 2px dashed var(--color-border);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  background: transparent;
}

.chip-primary {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.chip:hover {
  background-color: var(--color-surface-hover);
}